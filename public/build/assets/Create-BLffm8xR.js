import{a as v,u as j,j as e,H as y,L as m}from"./app-yoPYq-eA.js";import{A as N}from"./AuthenticatedLayout-B434L8aX.js";function k({committees:i}){const{auth:u}=v().props,r=u.user.role,o=r==="super_admin"||r.includes("state")?"state":r.includes("district")?"district":r.includes("tehsil")?"tehsil":"state",{data:a,setData:l,post:x,processing:n,errors:s}=j({committee_id:"",type:"administrative",category:"",title:"",proposal_text:"",rationale:"",proposed_action:"",effective_date:"",expires_date:"",vote_scheduled_date:""}),p=t=>{t.preventDefault(),x(route(`${o}.resolutions.store`))},b={disciplinary:"Disciplinary",administrative:"Administrative",financial:"Financial",election:"Election",policy:"Policy"},d={disciplinary:[{value:"member_suspension",label:"Member Suspension"},{value:"member_termination",label:"Member Termination"},{value:"member_warning",label:"Member Warning"},{value:"code_violation",label:"Code Violation"}],administrative:[{value:"portfolio_removal",label:"Portfolio Removal"},{value:"transfer_approval",label:"Transfer Approval"},{value:"appointment",label:"Appointment"},{value:"general",label:"General Administrative"}],financial:[{value:"budget_approval",label:"Budget Approval"},{value:"expenditure",label:"Expenditure Authorization"},{value:"audit",label:"Audit Directive"}],election:[{value:"election_annulment",label:"Election Annulment"},{value:"election_approval",label:"Election Approval"},{value:"result_certification",label:"Result Certification"}],policy:[{value:"policy_change",label:"Policy Change"},{value:"constitutional_amendment",label:"Constitutional Amendment"},{value:"rule_adoption",label:"Rule Adoption"}]},c={member_suspension:{member_id:0,duration_days:30,reason:"",effective_date:""},member_termination:{member_id:0,reason:"",effective_date:""},portfolio_removal:{leadership_position_id:0,member_id:0,reason:"",immediate:!0},transfer_approval:{transfer_id:0,from_zone_id:0,to_zone_id:0,reason:""}},h=t=>{l("type",t),l("category","")},g=t=>{l("category",t),c[t]&&l("proposed_action",JSON.stringify(c[t],null,2))};return e.jsxs(N,{children:[e.jsx(y,{title:"Propose Resolution"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(m,{href:route(`${o}.resolutions.index`),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 mb-4",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Resolutions"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Propose Resolution"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Submit a proposal for committee consideration and voting"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("form",{onSubmit:p,className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Committee ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a.committee_id,onChange:t=>l("committee_id",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0,children:[e.jsx("option",{value:"",children:"Select a committee..."}),i&&i.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.level,")"]},t.id))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Choose the committee that will vote on this resolution"}),s.committee_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.committee_id})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Resolution Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:Object.entries(b).map(([t,f])=>e.jsx("button",{type:"button",onClick:()=>h(t),className:`p-3 border-2 rounded-lg text-sm font-medium transition-all ${a.type===t?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:f},t))}),s.type&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.type})]}),a.type&&d[a.type]&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a.category,onChange:t=>g(t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0,children:[e.jsx("option",{value:"",children:"Select a category..."}),d[a.type].map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),s.category&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.category})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Resolution Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:t=>l("title",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",placeholder:"e.g., Resolution on Member Suspension for Misconduct",required:!0}),s.title&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Proposal Text ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a.proposal_text,onChange:t=>l("proposal_text",t.target.value),rows:"6",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 font-mono text-sm",placeholder:`WHEREAS... [background]

BE IT RESOLVED THAT... [specific action]`,required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Full text of the resolution proposal"}),s.proposal_text&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.proposal_text})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rationale"}),e.jsx("textarea",{value:a.rationale,onChange:t=>l("rationale",t.target.value),rows:"4",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",placeholder:"Explain the reasoning behind this resolution..."}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Why this resolution is necessary"}),s.rationale&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.rationale})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proposed Action (JSON)"}),e.jsx("textarea",{value:a.proposed_action,onChange:t=>l("proposed_action",t.target.value),rows:"8",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 font-mono text-sm",placeholder:'{\\n  "member_id": 123,\\n  "action": "suspend",\\n  "duration_days": 30\\n}'}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"JSON object describing the specific action to execute. Templates auto-populate based on category."}),s.proposed_action&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.proposed_action})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Important Dates"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date"}),e.jsx("input",{type:"date",value:a.effective_date,onChange:t=>l("effective_date",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When resolution takes effect"}),s.effective_date&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.effective_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),e.jsx("input",{type:"date",value:a.expires_date,onChange:t=>l("expires_date",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional expiration"}),s.expires_date&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.expires_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vote Scheduled"}),e.jsx("input",{type:"date",value:a.vote_scheduled_date,onChange:t=>l("vote_scheduled_date",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Planned voting date"}),s.vote_scheduled_date&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.vote_scheduled_date})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Resolution Workflow:"}),e.jsxs("ol",{className:"list-decimal ml-4 space-y-1 text-blue-800",children:[e.jsxs("li",{children:["Resolution created in ",e.jsx("strong",{children:"draft"})," status"]}),e.jsx("li",{children:"Proposer or committee chair opens voting"}),e.jsx("li",{children:"Committee members cast votes"}),e.jsx("li",{children:"Voting closed and results calculated"}),e.jsx("li",{children:"If passed, authorized portfolio executes"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[e.jsx(m,{href:route(`${o}.resolutions.index`),className:"px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium shadow-sm",children:n?"Submitting...":"Propose Resolution"})]})]})})]})})]})}export{k as default};
