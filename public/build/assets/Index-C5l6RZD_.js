import{j as e,r as p,H as M,L as o,b as x}from"./app-DdS2l4Qh.js";import{A as $}from"./AuthenticatedLayout-5ziU1Pur.js";function R({columns:t,data:l,mobileCardRenderer:i,keyField:c="id",className:g=""}){return e.jsxs("div",{className:g,children:[e.jsx("div",{className:"hidden md:block overflow-x-auto shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:t.map((a,d)=>e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.label},a.key||d))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:t.length,className:"px-6 py-12 text-center text-sm text-gray-500",children:"No data available"})}):l.map((a,d)=>e.jsx("tr",{className:"hover:bg-gray-50",children:t.map((n,m)=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.render?n.render(a):a[n.key]},n.key||m))},a[c]||d))})]})}),e.jsx("div",{className:"md:hidden space-y-4",children:l.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:e.jsx("p",{className:"text-gray-500",children:"No data available"})}):l.map((a,d)=>e.jsx("div",{children:i?i(a):e.jsx(D,{row:a,columns:t})},a[c]||d))})]})}function D({row:t,columns:l}){return e.jsx("div",{className:"bg-white shadow rounded-lg p-4 space-y-3",children:l.map((i,c)=>e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 flex-shrink-0 w-1/3",children:i.label}),e.jsx("dd",{className:"text-sm text-gray-900 text-right flex-1",children:i.render?i.render(t):t[i.key]})]},i.key||c))})}function E({members:t,filters:l,districts:i,statuses:c,canCreate:g,userRole:a,auth:d,showingTransferredOnly:n}){const[m,y]=p.useState(l.search||""),[b,f]=p.useState(l.status||"all"),[h,v]=p.useState(l.district_id||""),[N,j]=p.useState(l.tehsil_id||""),u=d?.user?.role||a,S=u?.toLowerCase().includes("tehsil")&&!u?.toLowerCase().includes("member"),r=(()=>{if(!u)return"member";const s=u.toLowerCase();return s==="super_admin"?"state":s.includes("district")&&!s.includes("member")?"district":s.includes("tehsil")&&!s.includes("member")?"tehsil":"member"})(),_=()=>{x.get(route(`${r}.members.index`),{search:m,status:b!=="all"?b:void 0,district_id:h||void 0,tehsil_id:N||void 0},{preserveState:!0,replace:!0})},A=()=>{y(""),f("all"),v(""),j(""),x.get(route(`${r}.members.index`))},w=s=>({pending:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",suspended:"bg-red-100 text-red-800",resigned:"bg-gray-100 text-gray-800",deceased:"bg-black text-white"})[s]||"bg-gray-100 text-gray-800",C=i.find(s=>s.id==h);return e.jsxs($,{user:d.user,header:"Member Management",children:[e.jsx(M,{title:"Members"}),e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Members"}),g&&e.jsx(o,{href:route("tehsil.members.create"),className:"bg-union-primary text-white px-4 py-2 rounded-lg hover:bg-red-700 transition",children:"Add New Member"})]}),n&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"Viewing District Members"}),e.jsxs("p",{className:"mt-1",children:["This list shows all members from your specific district. The ",e.jsx("strong",{children:"tehsil ðŸ“"})," column shows which tehsil each member belongs to."]})]})]})}),!S&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsx("input",{type:"text",value:m,onChange:s=>y(s.target.value),placeholder:"Name or ID...",className:"w-full border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:b,onChange:s=>f(s.target.value),className:"w-full border-gray-300 rounded-lg",children:[e.jsx("option",{value:"all",children:"All Statuses"}),c.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),e.jsxs("select",{value:h,onChange:s=>{v(s.target.value),j("")},className:"w-full border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Districts"}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tehsil"}),e.jsxs("select",{value:N,onChange:s=>j(s.target.value),className:"w-full border-gray-300 rounded-lg",disabled:!h,children:[e.jsx("option",{value:"",children:"All Tehsils"}),C?.tehsils?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{onClick:_,className:"bg-union-primary text-white px-6 py-2 rounded-lg hover:bg-red-700 transition",children:"Apply Filters"}),e.jsx("button",{onClick:A,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition",children:"Reset"})]})]}),e.jsx(R,{data:t.data,keyField:"id",columns:[{key:"membership_id",label:"Member ID",render:s=>e.jsx("span",{className:"font-medium text-gray-900",children:s.membership_id})},{key:"name",label:"Name"},{key:"email",label:"Email",render:s=>e.jsx("span",{className:"text-gray-600 truncate max-w-[150px] inline-block",title:s.contact_email||s.user?.email,children:s.contact_email||s.user?.email||"N/A"})},{key:"tehsil",label:`Tehsil ${n?"ðŸ“":""}`,render:s=>e.jsx("span",{className:n?"font-semibold text-blue-600":"text-gray-600",children:s.tehsil?.name})},{key:"school_name",label:"Department"},{key:"star_grade",label:"Star Grade",render:s=>e.jsx("span",{className:"text-yellow-500",children:"â­".repeat(s.star_grade)})},{key:"status",label:"Status",render:s=>e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${w(s.status)}`,children:s.status})},{key:"actions",label:"Actions",render:s=>e.jsx("div",{className:"flex justify-end gap-2",children:s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x.post(route(`${r}.members.approve`,s.id),{},{preserveScroll:!0,onSuccess:()=>alert("Member approved successfully!")}),className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 transition text-xs min-h-touch",children:"âœ“ Approve"}),e.jsx("button",{onClick:()=>{confirm("Are you sure you want to reject this member?")&&x.post(route(`${r}.members.reject`,s.id),{},{preserveScroll:!0,onSuccess:()=>alert("Member rejected successfully.")})},className:"bg-red-600 text-white px-3 py-1.5 rounded hover:bg-red-700 transition text-xs min-h-touch",children:"âœ— Reject"})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{href:route(`${r}.members.show`,s.id),className:"text-union-primary hover:text-red-900 font-medium",children:"View"}),r!=="member"&&e.jsx(o,{href:route(`${r}.members.edit`,s.id),className:"text-union-secondary hover:text-amber-700 font-medium",children:"Edit"})]})})}],mobileCardRenderer:s=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start border-b pb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.membership_id})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${w(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Tehsil:"}),e.jsx("span",{className:n?"font-semibold text-blue-600":"text-gray-900",children:s.tehsil?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Department:"}),e.jsx("span",{className:"text-gray-900 text-right",children:s.school_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"}),e.jsx("span",{className:"text-gray-900 truncate ml-2 font-medium",children:s.contact_email||s.user?.email||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Rating:"}),e.jsx("span",{className:"text-yellow-500",children:"â­".repeat(s.star_grade)})]})]}),e.jsx("div",{className:"flex gap-2 pt-3 border-t",children:s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x.post(route(`${r}.members.approve`,s.id),{},{preserveScroll:!0,onSuccess:()=>alert("Member approved successfully!")}),className:"flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm font-medium min-h-touch",children:"âœ“ Approve"}),e.jsx("button",{onClick:()=>{confirm("Are you sure you want to reject this member?")&&x.post(route(`${r}.members.reject`,s.id),{},{preserveScroll:!0,onSuccess:()=>alert("Member rejected successfully.")})},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition text-sm font-medium min-h-touch",children:"âœ— Reject"})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{href:route(`${r}.members.show`,s.id),className:"flex-1 text-center bg-union-primary text-white px-4 py-2 rounded hover:bg-red-700 transition text-sm font-medium min-h-touch",children:"View Details"}),r!=="member"&&e.jsx(o,{href:route(`${r}.members.edit`,s.id),className:"flex-1 text-center bg-union-secondary text-white px-4 py-2 rounded hover:bg-amber-700 transition text-sm font-medium min-h-touch",children:"Edit"})]})})]})}),t.links.length>3&&e.jsx("div",{className:"bg-white px-4 py-3 mt-4 rounded-lg shadow sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:t.from})," to"," ",e.jsx("span",{className:"font-medium",children:t.to})," of"," ",e.jsx("span",{className:"font-medium",children:t.total})," results"]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:t.links.map((s,k)=>e.jsx(o,{href:s.url||"#",className:`px-3 py-2 rounded min-h-touch ${s.active?"bg-union-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label},preserveState:!0},k))})]})})]})]})}export{E as default};
