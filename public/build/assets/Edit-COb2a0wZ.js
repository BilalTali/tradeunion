import{a as M,u as C,r as c,j as e,H as D,L as P}from"./app-R9sS8T_F.js";import{A as k}from"./AuthenticatedLayout-D3a7YhBg.js";function T({member:a,states:L,districts:g,tehsils:b,authScope:i}){const{auth:p}=M().props,d=i?.role||"member",m=d?d==="super_admin"?"state":d.includes("district")?"district":d.toLowerCase().includes("tehsil")?"tehsil":"member":"member",j=()=>{const t=a.user?.role||"member";return{member:"Member",tehsil_member:"Tehsil Member",district_member:"District Member",state_member:"State Member"}[t]||"Member"},{data:r,setData:l,post:f,processing:x,errors:s}=C({_method:"PUT",tehsil_id:a.tehsil_id||"",member_status:j(),name:a.name||"",parentage:a.parentage||"",photo:null,dob:a.dob?a.dob.split("T")[0].substring(0,10):"",contact_email:a.contact_email||"",contact_phone:a.contact_phone||"",school_name:a.school_name||"",union_join_date:a.union_join_date?a.union_join_date.split("T")[0].substring(0,10):""}),[o,h]=c.useState(a.tehsil?.district_id||""),[u,_]=c.useState(a.photo_path?`/storage/${a.photo_path}`:null);c.useEffect(()=>{i?.district_id&&h(i.district_id),i?.tehsil_id&&l("tehsil_id",i.tehsil_id)},[i]);const v=t=>{h(t),l("tehsil_id","")},N=t=>{const n=t.target.files[0];n&&(l("photo",n),_(URL.createObjectURL(n)))},y=t=>{t.preventDefault(),f(route(`${m}.members.update`,a.id),{forceFormData:!0})},w=o?b.filter(t=>t.district_id==o):[];return e.jsxs(k,{user:p.user,header:"Edit Member",children:[e.jsx(D,{title:"Edit Member"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Member Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[u&&e.jsx("img",{src:u,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-union-primary file:text-white hover:file:bg-red-700"})]}),s.photo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.photo})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Member Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.member_status,onChange:t=>l("member_status",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0,children:[e.jsx("option",{value:"Member",children:"Member"}),e.jsx("option",{value:"Tehsil Member",children:"Tehsil Member"}),e.jsx("option",{value:"District Member",children:"District Member"}),e.jsx("option",{value:"State Member",children:"State Member"})]}),s.member_status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.member_status})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.name,onChange:t=>l("name",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Parentage (Father/Mother/Guardian) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.parentage,onChange:t=>l("parentage",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.parentage&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.parentage})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:r.dob,onChange:t=>l("dob",t.target.value),className:"w-full border-gray-300 rounded-lg"}),s.dob&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.dob})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:r.contact_email,onChange:t=>l("contact_email",t.target.value),className:"w-full border-gray-300 rounded-lg"}),s.contact_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contact_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"text",value:r.contact_phone,onChange:t=>{const n=t.target.value.replace(/\D/g,"").slice(0,10);l("contact_phone",n)},className:"w-full border-gray-300 rounded-lg",maxLength:10,pattern:"\\d{10}",title:"Please enter exactly 10 digits"}),s.contact_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contact_phone})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["District ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:t=>v(t.target.value),className:"w-full border-gray-300 rounded-lg disabled:bg-gray-100",required:!0,disabled:!!i?.district_id,children:[e.jsx("option",{value:"",children:"Select District"}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["tehsil ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.tehsil_id,onChange:t=>l("tehsil_id",t.target.value),className:"w-full border-gray-300 rounded-lg disabled:bg-gray-100",disabled:!o||!!i?.tehsil_id,required:!0,children:[e.jsx("option",{value:"",children:"Select tehsil"}),w.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.tehsil_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.tehsil_id})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.school_name,onChange:t=>l("school_name",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.school_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.school_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Union Join Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:r.union_join_date,onChange:t=>l("union_join_date",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.union_join_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.union_join_date})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-6",children:[e.jsx(P,{href:route(`${m}.members.index`),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-union-primary text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50",children:x?"Saving...":"Save Changes"})]})]})})})})]})}export{T as default};
