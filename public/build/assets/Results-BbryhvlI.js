import{a as g,j as e,H as p,b}from"./app-D6okV9r1.js";import{A as f}from"./AuthenticatedLayout-BGHQQ68j.js";function N({election:l,results:s,candidates:n}){const{auth:o}=g().props,c=window.location.pathname.includes("/election-commissioner/"),x=o.user?.role!=="member"||c,i=(()=>{const t=window.location.pathname;if(t.includes("/tehsil/election-commissioner/"))return"tehsil.ec";if(t.includes("/district/election-commissioner/"))return"district.ec";if(t.includes("/state/election-commissioner/"))return"state.ec";const r=o.user?.role||"";return r==="super_admin"?"state":r.includes("district")?"district":r.includes("tehsil")?"tehsil":"member"})(),m=()=>{confirm("Certify these results? This action certifies the election outcome.")&&b.post(route(`${i}.results.certify`,l.id))};return e.jsxs(f,{children:[e.jsx(p,{title:`Results - ${l.title}`}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-900 to-purple-900 text-white rounded-lg shadow-lg p-8 mb-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Election Results"}),e.jsx("p",{className:"text-indigo-100 text-lg",children:l.title}),e.jsxs("p",{className:"text-indigo-200 text-sm mt-2",children:[l.level.charAt(0).toUpperCase()+l.level.slice(1)," Level"]})]}),s.length>0&&s[0].is_certified?e.jsxs("div",{className:"bg-green-500 px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-bold",children:"CERTIFIED"})]}):e.jsx("div",{className:"bg-yellow-500 px-4 py-2 rounded-lg flex items-center gap-2",children:e.jsx("span",{className:"font-bold",children:"PENDING CERTIFICATION"})})]})}),s.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ†"}),"Election Winners"]}),e.jsx("div",{className:"space-y-4",children:s.map(t=>e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center text-white text-2xl font-bold",children:t.winner?.name?.charAt(0)||"?"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.winner?.name||"Unknown"}),e.jsx("p",{className:"text-gray-600",children:t.position_title})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[t.vote_percentage,"%"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.total_votes," votes"]})]}),t.is_certified&&e.jsxs("a",{href:route(`${i}.results.certificate`,[l.id,t.id]),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 font-semibold transition shadow-md hover:shadow-lg flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z",clipRule:"evenodd"})}),"Download Certificate"]})]})]})},t.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Detailed Results"}),n.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No candidates in this election"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Rank"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Candidate"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Position"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Votes"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Percentage"})]})}),e.jsx("tbody",{children:n.map((t,r)=>{const h=s[0]?.total_voters||1,d=(t.vote_count/h*100).toFixed(2),a=r===0;return e.jsxs("tr",{className:`border-b border-gray-100 ${a?"bg-yellow-50":""}`,children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold ${a?"bg-yellow-400 text-white":"bg-gray-200 text-gray-700"}`,children:r+1})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:t.member.name.charAt(0)}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.member.name})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:t.position_title}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:"font-bold text-gray-900",children:t.vote_count})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${a?"bg-yellow-400":"bg-blue-500"}`,style:{width:`${d}%`}})}),e.jsxs("span",{className:"font-semibold text-gray-700 w-16 text-right",children:[d,"%"]})]})})]},t.id)})})]})})]}),s.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Voters"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s[0].total_voters})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Votes Cast"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s[0].total_votes})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Voter Turnout"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[s[0].total_voters>0?(s[0].total_votes/s[0].total_voters*100).toFixed(1):0,"%"]})]})]}),x&&s.length>0&&!s[0].is_certified&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Election Commission Actions"}),e.jsxs("button",{onClick:m,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold transition shadow-md hover:shadow-lg flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Certify Results"]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("a",{href:route(`${i==="member"?"member":i}.elections.show`,l.id),className:"inline-flex items-center px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold transition",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Election"]})})]})})]})}export{N as default};
