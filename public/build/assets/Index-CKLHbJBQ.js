import{r as _,u as x,j as e,H as f,b as u}from"./app-DiGApgtN.js";import{A as N}from"./AuthenticatedLayout-CcrKPP7I.js";function A({auth:g,election:i,currentVotingCriteria:b,currentCandidacyCriteria:p,allZones:C,allDistricts:w,allDesignations:q,eligibleVotersPreview:l,eligibleCandidatesPreview:n}){const[r,d]=_.useState("voting"),s=(()=>{const a=window.location.pathname;return a.includes("/election-commissioner/")||a.includes("/chief-election-commissioner/")?`${i.level}.ec`:i.level})(),c=a=>({min_age:a?.min_age??"",max_age:a?.max_age??"",min_service_years:a?.min_service_years??"",min_union_years:a?.min_union_years??"",star_grade_min:a?.star_grade_min??"",star_grade_max:a?.star_grade_max??"",required_status:a?.required_status??[],required_designations:a?.required_designations??[],excluded_designations:a?.excluded_designations??[],require_leadership_position:a?.require_leadership_position??!1,identity_verified_required:a?.identity_verified_required??!1,specific_zones:a?.specific_zones??[],specific_districts:a?.specific_districts??[]}),m=x({criteria:c(b)}),o=x({criteria:c(p)}),h=a=>{a.preventDefault(),m.put(route(`${s}.voting-criteria.update`,i.id),{onSuccess:()=>{alert("Voting eligibility criteria updated successfully!")}})},y=a=>{a.preventDefault(),o.put(route(`${s}.candidacy-criteria.update`,i.id),{onSuccess:()=>{alert("Candidacy eligibility criteria updated successfully!")}})},v=()=>{confirm("This will populate delegates based on voting criteria. Continue?")&&u.post(route(`${s}.apply-criteria`,i.id))},t=r==="voting"?m:o,j=r==="voting"?h:y;return e.jsxs(N,{user:g.user,header:e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Eligibility Criteria - ",i.title]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set rules for voting and candidacy eligibility"})]}),children:[e.jsx(f,{title:"Eligibility Criteria"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>d("voting"),className:`px-6 py-4 text-sm font-medium ${r==="voting"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["ðŸ—³ï¸ Voting Eligibility (",l," eligible)"]}),e.jsxs("button",{onClick:()=>d("candidacy"),className:`px-6 py-4 text-sm font-medium ${r==="candidacy"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["ðŸ“‹ Candidacy Eligibility (",n," eligible)"]})]})}),e.jsx("form",{onSubmit:j,className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b pb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Age Requirements"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Age (years)"}),e.jsx("input",{type:"number",min:"18",max:"100",value:t.data.criteria.min_age||"",onChange:a=>t.setData("criteria",{...t.data.criteria,min_age:a.target.value?parseInt(a.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Age (years)"}),e.jsx("input",{type:"number",min:"18",max:"100",value:t.data.criteria.max_age||"",onChange:a=>t.setData("criteria",{...t.data.criteria,max_age:a.target.value?parseInt(a.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 60"})]})]})]}),e.jsxs("div",{className:"border-b pb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Experience Requirements"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Service Years"}),e.jsx("input",{type:"number",min:"0",max:"50",value:t.data.criteria.min_service_years||"",onChange:a=>t.setData("criteria",{...t.data.criteria,min_service_years:a.target.value?parseInt(a.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Years since joining service"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Union Years"}),e.jsx("input",{type:"number",min:"0",max:"50",value:t.data.criteria.min_union_years||"",onChange:a=>t.setData("criteria",{...t.data.criteria,min_union_years:a.target.value?parseInt(a.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Years of union membership"})]})]})]}),e.jsxs("div",{className:"border-b pb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Star Grade"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Star Grade"}),e.jsxs("select",{value:t.data.criteria.star_grade_min||"",onChange:a=>t.setData("criteria",{...t.data.criteria,star_grade_min:a.target.value?parseInt(a.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"No minimum"}),[1,2,3,4,5].map(a=>e.jsxs("option",{value:a,children:["â­ ",a," Star",a>1?"s":""]},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Star Grade"}),e.jsxs("select",{value:t.data.criteria.star_grade_max||"",onChange:a=>t.setData("criteria",{...t.data.criteria,star_grade_max:a.target.value?parseInt(a.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"No maximum"}),[1,2,3,4,5].map(a=>e.jsxs("option",{value:a,children:["â­ ",a," Star",a>1?"s":""]},a))]})]})]})]}),e.jsxs("div",{className:"border-b pb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Requirements"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.data.criteria.require_leadership_position||!1,onChange:a=>t.setData("criteria",{...t.data.criteria,require_leadership_position:a.target.checked}),className:"rounded border-gray-300 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Require current leadership position"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.data.criteria.identity_verified_required||!1,onChange:a=>t.setData("criteria",{...t.data.criteria,identity_verified_required:a.target.checked}),className:"rounded border-gray-300 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Require identity verification"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[r==="voting"&&e.jsxs("p",{children:["âœ“ ",l," members meet current criteria"]}),r==="candidacy"&&e.jsxs("p",{children:["âœ“ ",n," members meet current criteria"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>u.visit(route(`${s}.elections.show`,i.id)),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:t.processing,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:t.processing?"Saving...":"Save Criteria"}),r==="voting"&&e.jsx("button",{type:"button",onClick:v,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Apply & Populate Delegates"})]})]})]})})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"View Full Member List"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"See all members with eligibility status"})]}),e.jsx("a",{href:route(`${s}.eligible-members`,i.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"View Members â†’"})]})})]})})]})}export{A as default};
