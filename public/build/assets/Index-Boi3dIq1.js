import{a as j,r as y,j as e,H as b,L as N,b as l}from"./app-DiGApgtN.js";import{A as f}from"./AuthenticatedLayout-CcrKPP7I.js";function k({transfers:d,currentStatus:m,stats:n}){const{auth:i}=j().props,[p,h]=y.useState(m),x=i.user.role,a=x==="super_admin"?"state":x.includes("district")?"district":"tehsil",u=t=>{h(t),l.get(route(`${a}.transfers.index`),{status:t},{preserveState:!0})},g={pending:"bg-yellow-100 text-yellow-800",recommended:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-gray-100 text-gray-800"},c={member:"Member",tehsil:"Tehsil",district:"District",state:"State"},s=(t,r)=>{if(r==="reject"){const o=prompt("Enter rejection reason:");if(!o)return;l.post(route(`${a}.transfers.${r}`,t),{rejection_reason:o})}else l.post(route(`${a}.transfers.${r}`,t))};return e.jsxs(f,{user:i.user,header:"Member Transfers",children:[e.jsx(b,{title:"Member Transfers"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ðŸ”„ Member Transfers"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage member level transfers with approval workflow."})]}),e.jsx(N,{href:route(`${a}.transfers.create`),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium",children:"+ New Transfer"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-1 mb-6 flex flex-wrap gap-1",children:["pending","recommended","approved","completed","all"].map(t=>e.jsxs("button",{onClick:()=>u(t),className:`px-4 py-2 rounded-lg font-medium transition-all text-sm ${p===t?"bg-red-600 text-white shadow":"text-gray-600 hover:bg-gray-100"}`,children:[t.charAt(0).toUpperCase()+t.slice(1),t!=="all"&&n[t]!==void 0&&` (${n[t]})`]},t))}),e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:d.data?.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"From"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:t.member?.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:c[t.from_level]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:c[t.to_level]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g[t.status]}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s(t.id,"recommend"),className:"text-blue-600 hover:text-blue-900",children:"Recommend"}),e.jsx("button",{onClick:()=>s(t.id,"approve"),className:"text-green-600 hover:text-green-900",children:"Approve"}),e.jsx("button",{onClick:()=>s(t.id,"reject"),className:"text-red-600 hover:text-red-900",children:"Reject"})]}),t.status==="recommended"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s(t.id,"approve"),className:"text-green-600 hover:text-green-900",children:"Approve"}),e.jsx("button",{onClick:()=>s(t.id,"reject"),className:"text-red-600 hover:text-red-900",children:"Reject"})]}),t.status==="approved"&&e.jsx("button",{onClick:()=>s(t.id,"complete"),className:"text-green-600 hover:text-green-900 font-semibold",children:"Complete âœ“"})]})]},t.id))})]}):e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No transfers found."})})})]})})]})}export{k as default};
