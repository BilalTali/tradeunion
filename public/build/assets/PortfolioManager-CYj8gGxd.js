import{r as m,u as E,j as e,H as F}from"./app-DiGApgtN.js";import{A as L}from"./AuthenticatedLayout-CcrKPP7I.js";import{M,S as B}from"./Modal-CK4PCXvp.js";import{I as r}from"./InputLabel-B9Y6J6cy.js";import{T as n}from"./TextInput-BUVtb_g3.js";import{C as l}from"./Checkbox-QovOW6U6.js";import{P as g}from"./PrimaryButton-TJrn8t6T.js";import"./transition-DbEBbqN6.js";import"./with-selector-C9TDHXOE.js";function G({auth:v,portfolios:j,allPortfolios:_}){const[f,d]=m.useState(!1),[c,h]=m.useState(null),[x,y]=m.useState(""),{data:a,setData:t,post:N,put:w,delete:k,processing:b,errors:i,reset:u,clearErrors:p}=E({name:"",code:"",level:"district",type:"executive",authority_rank:99,reports_to_portfolio_id:"",description:"",can_assign_portfolios:!1,can_initiate_transfers:!1,can_approve_transfers:!1,can_conduct_elections:!1,can_resolve_disputes:!1,is_financial_role:!1,is_active:!0}),C=()=>{h(null),u(),p(),d(!0)},P=s=>{h(s),t({name:s.name,code:s.code,level:s.level,type:s.type,authority_rank:s.authority_rank,reports_to_portfolio_id:s.reports_to_portfolio_id||"",description:s.description||"",can_assign_portfolios:!!s.can_assign_portfolios,can_initiate_transfers:!!s.can_initiate_transfers,can_approve_transfers:!!s.can_approve_transfers,can_conduct_elections:!!s.can_conduct_elections,can_resolve_disputes:!!s.can_resolve_disputes,is_financial_role:!!s.is_financial_role,is_active:!!s.is_active}),p(),d(!0)},o=()=>{d(!1),u()},S=s=>{s.preventDefault(),c?w(route("state.portfolios.update",c.id),{onSuccess:()=>o()}):N(route("state.portfolios.store"),{onSuccess:()=>o()})},T=s=>{confirm("Are you sure you want to delete this portfolio? This cannot be undone.")&&k(route("state.portfolios.destroy",s.id))},A=j.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())||s.code.toLowerCase().includes(x.toLowerCase()));return e.jsxs(L,{user:v.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Portfolio Master Data"}),children:[e.jsx(F,{title:"Portfolio Manager"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"w-1/3",children:e.jsx(n,{placeholder:"Search Portfolios...",value:x,onChange:s=>y(s.target.value),className:"w-full"})}),e.jsx(g,{onClick:C,children:"+ Add Portfolio"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name/Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.code})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:s.level}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:s.type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.authority_rank}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>P(s),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>T(s),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},s.id))})]})})]})})}),e.jsx(M,{show:f,onClose:o,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:c?"Edit Portfolio":"Add New Portfolio"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",value:"Name"}),e.jsx(n,{id:"name",value:a.name,onChange:s=>t("name",s.target.value),className:"mt-1 block w-full",required:!0}),i.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"code",value:"Code (Unique)"}),e.jsx(n,{id:"code",value:a.code,onChange:s=>t("code",s.target.value),className:"mt-1 block w-full",required:!0}),i.code&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:i.code})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"level",value:"Level"}),e.jsxs("select",{id:"level",value:a.level,onChange:s=>t("level",s.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"state",children:"State"}),e.jsx("option",{value:"district",children:"District"}),e.jsx("option",{value:"tehsil",children:"Tehsil"}),e.jsx("option",{value:"zone",children:"Zone"})]}),i.level&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:i.level})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"type",value:"Type"}),e.jsxs("select",{id:"type",value:a.type,onChange:s=>t("type",s.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"executive",children:"Executive"}),e.jsx("option",{value:"administrative",children:"Administrative"}),e.jsx("option",{value:"financial",children:"Financial"}),e.jsx("option",{value:"legal",children:"Legal"}),e.jsx("option",{value:"election_commission",children:"Election Commission"})]}),i.type&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:i.type})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"authority_rank",value:"Rank (1=High)"}),e.jsx(n,{id:"authority_rank",type:"number",value:a.authority_rank,onChange:s=>t("authority_rank",s.target.value),className:"mt-1 block w-full",required:!0}),i.authority_rank&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:i.authority_rank})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"reports_to",value:"Reports To"}),e.jsxs("select",{id:"reports_to",value:a.reports_to_portfolio_id,onChange:s=>t("reports_to_portfolio_id",s.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),_.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.level,")"]},s.id))]}),i.reports_to_portfolio_id&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:i.reports_to_portfolio_id})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"description",value:"Description"}),e.jsx(n,{id:"description",value:a.description,onChange:s=>t("description",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.can_assign_portfolios,onChange:s=>t("can_assign_portfolios",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Can Assign Portfolios"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.can_initiate_transfers,onChange:s=>t("can_initiate_transfers",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Can Initiate Transfers"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.can_approve_transfers,onChange:s=>t("can_approve_transfers",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Can Approve Transfers"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.can_conduct_elections,onChange:s=>t("can_conduct_elections",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Can Conduct Elections"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.can_resolve_disputes,onChange:s=>t("can_resolve_disputes",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Can Resolve Disputes"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.is_financial_role,onChange:s=>t("is_financial_role",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Is Financial Role"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(l,{checked:a.is_active,onChange:s=>t("is_active",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Is Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(B,{type:"button",onClick:o,children:"Cancel"}),e.jsx(g,{disabled:b,children:c?"Update Portfolio":"Create Portfolio"})]})]})]})})]})}export{G as default};
