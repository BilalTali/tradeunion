import{r as u,u as E,j as e,H as L}from"./app-BBa10Te9.js";import{A as T}from"./AuthenticatedLayout-DUa3a0R5.js";import{M as F,S as O}from"./Modal-CWZzrn1q.js";import{I as c}from"./InputLabel-B9ileu3e.js";import{T as n}from"./TextInput-Bf559GbG.js";import{P as j}from"./PrimaryButton-Ba6sWSKU.js";import"./transition-B1S_Cm74.js";import"./with-selector-G6p5hQuD.js";function G({auth:g,districts:y,states:o}){const[v,x]=u.useState(!1),[r,h]=u.useState(null),[m,N]=u.useState(""),{data:a,setData:i,post:w,put:_,delete:b,processing:C,errors:s,reset:p,clearErrors:f}=E({name:"",code:"",state_id:o.length>0?o[0].id:"",office_address:"",contact_details:""}),D=()=>{h(null),p(),f(),x(!0)},S=t=>{h(t),i({name:t.name,code:t.code,state_id:t.state_id,office_address:t.office_address||"",contact_details:t.contact_details?JSON.stringify(t.contact_details):""}),f(),x(!0)},l=()=>{x(!1),p()},k=t=>{t.preventDefault();let d={...a};try{d.contact_details?d.contact_details=JSON.parse(d.contact_details):d.contact_details=null}catch{delete d.contact_details}r?_(route("state.districts.update",r.id),{onSuccess:()=>l()}):w(route("state.districts.store"),{onSuccess:()=>l()})},M=t=>{confirm("Are you sure you want to delete this district? This action cannot be undone.")&&b(route("state.districts.destroy",t.id))},A=y.filter(t=>t.name.toLowerCase().includes(m.toLowerCase())||t.code.toLowerCase().includes(m.toLowerCase()));return e.jsxs(T,{user:g.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"District Master Data"}),children:[e.jsx(L,{title:"District Manager"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"w-1/3",children:e.jsx(n,{placeholder:"Search Districts...",value:m,onChange:t=>N(t.target.value),className:"w-full"})}),e.jsx(j,{onClick:D,children:"+ Add District"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tehsils"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.state?.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:t.tehsils_count||0})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>S(t),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>M(t),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t.id))})]})})]})})}),e.jsx(F,{show:v,onClose:l,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:r?"Edit District":"Add New District"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",value:"District Name"}),e.jsx(n,{id:"name",value:a.name,onChange:t=>i("name",t.target.value),className:"mt-1 block w-full",required:!0}),s.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"code",value:"District Code"}),e.jsx(n,{id:"code",value:a.code,onChange:t=>i("code",t.target.value),className:"mt-1 block w-full",required:!0}),s.code&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.code})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"state_id",value:"State"}),e.jsxs("select",{id:"state_id",value:a.state_id,onChange:t=>i("state_id",t.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select State"}),o.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.state_id&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.state_id})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"office_address",value:"Office Address (Optional)"}),e.jsx(n,{id:"office_address",value:a.office_address,onChange:t=>i("office_address",t.target.value),className:"mt-1 block w-full"}),s.office_address&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.office_address})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(O,{type:"button",onClick:l,children:"Cancel"}),e.jsx(j,{disabled:C,children:r?"Update District":"Create District"})]})]})]})})]})}export{G as default};
