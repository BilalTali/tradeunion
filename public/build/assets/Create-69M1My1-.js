import{a as j,r as y,u as v,j as e,H as N,L as w}from"./app-B6I_m7Lk.js";import{A as _}from"./AuthenticatedLayout-CRyv6Qyz.js";import{R as k}from"./RichTextEditor-B06B5r9j.js";function E({categories:x,initialCategory:u,portfolios:i=[]}){const{auth:n}=j().props,[s,d]=y.useState(!1),{data:r,setData:a,post:g,processing:o,errors:l}=v({title:"",content:"",excerpt:"",category:u||"article",publish_date:"",status:"draft",visibility:"members_only",featured_image:null,event_type:"meeting",event_scope:"tehsil",start_date:"",end_date:"",venue:"",organizer_portfolio_id:"",priority:"normal",expiry_date:""}),c=(()=>{const t=n.user?.role||"";return t==="super_admin"?"state":t.includes("district")?"district":t.includes("tehsil")?"tehsil":"state"})(),m=t=>{t.preventDefault(),g(route(`${c}.blog.store`))},h=()=>r.featured_image instanceof File?URL.createObjectURL(r.featured_image):null,b=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-pink-500",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"ðŸ“… Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Event Type"}),e.jsxs("select",{value:r.event_type,onChange:t=>a("event_type",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-pink-500 focus:border-pink-500",children:[e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"election",children:"Election"}),e.jsx("option",{value:"rally",children:"Rally/Protest"}),e.jsx("option",{value:"program",children:"Cultural Program"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Venue"}),e.jsx("input",{type:"text",value:r.venue,onChange:t=>a("venue",t.target.value),placeholder:"e.g. Town Hall, Main Office",className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date & Time"}),e.jsx("input",{type:"datetime-local",value:r.start_date,onChange:t=>a("start_date",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date & Time"}),e.jsx("input",{type:"datetime-local",value:r.end_date,onChange:t=>a("end_date",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organizer (Portfolio)"}),e.jsxs("select",{value:r.organizer_portfolio_id,onChange:t=>a("organizer_portfolio_id",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-pink-500 focus:border-pink-500",children:[e.jsx("option",{value:"",children:"Select Organizer..."}),i.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]})]})}),p=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-red-500",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"ðŸ“¢ Official Communication Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority Level"}),e.jsxs("select",{value:r.priority,onChange:t=>a("priority",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"urgent",children:"Urgent / Immediate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),e.jsx("input",{type:"date",value:r.expiry_date,onChange:t=>a("expiry_date",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-red-500 focus:border-red-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-archive after this date (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Issuing Authority"}),e.jsxs("select",{value:r.organizer_portfolio_id,onChange:t=>a("organizer_portfolio_id",t.target.value),className:"mt-1 w-full rounded-lg border-gray-300 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"",children:"Select Authority..."}),i.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]})]})}),f=()=>e.jsxs("article",{className:"bg-white rounded-3xl shadow-xl overflow-hidden animate-in fade-in duration-300 border border-gray-200",children:[["notice","circular","announcement"].includes(r.category)&&e.jsxs("div",{className:`p-4 text-center text-white font-bold uppercase tracking-widest ${r.priority==="urgent"?"bg-red-600":"bg-blue-900"}`,children:["OFFICIAL ",r.category," ",r.priority==="urgent"&&"- URGENT"]}),r.featured_image&&e.jsx("div",{className:"w-full bg-gray-100 flex items-center justify-center overflow-hidden rounded-lg mb-6",children:e.jsx("img",{src:h(),alt:"Preview",className:"w-full h-auto max-h-[600px] object-contain"})}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 text-sm font-bold text-gray-500 border-b pb-4",children:[e.jsx("span",{className:"uppercase text-blue-600",children:r.category}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["No: ",Date.now().toString().slice(-6)," (Ref)"]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:r.publish_date?new Date(r.publish_date).toLocaleDateString():new Date().toLocaleDateString()})]}),e.jsx("h1",{className:"text-3xl md:text-5xl font-extrabold text-gray-900 mb-6 leading-tight font-serif",children:r.title||"Untitled Post"}),r.category==="event"&&e.jsxs("div",{className:"mb-8 p-6 bg-pink-50 rounded-xl border border-pink-100 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-pink-500 uppercase",children:"Venue"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.venue||"TBA"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-pink-500 uppercase",children:"Starts"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.start_date?new Date(r.start_date).toLocaleString():"TBA"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-pink-500 uppercase",children:"Ends"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.end_date?new Date(r.end_date).toLocaleString():"TBA"})]})]}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-800",dangerouslySetInnerHTML:{__html:r.content||"<p>No content...</p>"}}),["notice","circular","announcement"].includes(r.category)&&e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 flex justify-end",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-gray-900",children:"Authorized Signatory"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Employees Union Portal"})]})})]}),e.jsx("div",{className:"bg-gray-50 p-6 text-center border-t",children:e.jsx("button",{onClick:()=>d(!1),className:"text-blue-600 font-bold hover:underline",children:"Exit Preview to Continue Editing"})})]});return e.jsxs(_,{user:n.user,header:`Create ${r.category.charAt(0).toUpperCase()+r.category.slice(1)}`,children:[e.jsx(N,{title:`New ${r.category}`}),e.jsx("div",{className:"py-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{href:route(`${c}.blog.index`),className:"text-gray-500 hover:text-gray-900 flex items-center gap-1 text-sm font-medium mb-1",children:"â† Back to Dashboard"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.category==="event"?"ðŸ—“ï¸ Schedule Event":["notice","circular","announcement"].includes(r.category)?"ðŸ“¢ Issue Official Post":"âœï¸ Write Article"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border",children:x.map(t=>e.jsx("button",{onClick:()=>a("category",t),className:`px-3 py-1.5 rounded text-xs font-bold capitalize transition ${r.category===t?"bg-black text-white":"text-gray-500 hover:bg-gray-100"}`,children:t},t))}),e.jsx("button",{type:"button",onClick:()=>d(!s),className:`px-4 py-2 rounded-lg font-bold transition flex items-center gap-2 border ${s?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:s?"âœï¸ Edit":"ðŸ‘ï¸ Preview"})]})]}),s?f():e.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in fade-in",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Title / Subject"}),e.jsx("input",{type:"text",value:r.title,onChange:t=>a("title",t.target.value),placeholder:r.category==="circular"?"e.g. Circular regarding Annual Meet...":"Enter title...",className:"w-full text-xl font-bold border-gray-200 rounded-lg focus:ring-black focus:border-black",required:!0}),l.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.title})]}),r.category==="event"&&b(),["notice","circular","announcement"].includes(r.category)&&p(),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200 flex justify-between items-center",children:e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Content Body"})}),e.jsx("div",{className:"min-h-[400px]",children:e.jsx(k,{content:r.content,onChange:t=>a("content",t)})}),l.content&&e.jsx("p",{className:"p-4 text-red-500 text-sm",children:l.content})]}),r.category==="event"&&e.jsxs("div",{className:"mb-6 bg-pink-50 p-6 rounded-xl border border-pink-100",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-700 mb-4 flex items-center gap-2",children:"ðŸ“… Event Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audience"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"target_audience",value:"all_members",checked:r.target_audience==="all_members",onChange:t=>a("target_audience",t.target.value),className:"text-pink-600 focus:ring-pink-500"}),e.jsx("span",{className:"text-gray-900",children:"All Members"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"target_audience",value:"portfolio_holders",checked:r.target_audience==="portfolio_holders",onChange:t=>a("target_audience",t.target.value),className:"text-pink-600 focus:ring-pink-500"}),e.jsx("span",{className:"text-gray-900 font-bold",children:"Portfolio Holders Only"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.target_audience==="all_members"?"Invite everyone in your jurisdiction (tehsil/District/State).":"Invite only Office Bearers / Portfolio holders."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Short Summary"}),e.jsx("textarea",{value:r.excerpt,onChange:t=>a("excerpt",t.target.value),rows:"2",className:"w-full border-gray-200 rounded-lg focus:ring-black focus:border-black"})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 sticky top-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold uppercase mb-2 ${r.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:["Status: ",r.status]}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Publishing"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Status"}),e.jsxs("select",{value:r.status,onChange:t=>a("status",t.target.value),className:"w-full rounded-lg border-gray-200",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Visibility"}),e.jsxs("select",{value:r.visibility,onChange:t=>a("visibility",t.target.value),className:"w-full rounded-lg border-gray-200",children:[e.jsx("option",{value:"members_only",children:"Members Only"}),e.jsx("option",{value:"public",children:"Public"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Publish Date"}),e.jsx("input",{type:"datetime-local",value:r.publish_date,onChange:t=>a("publish_date",t.target.value),className:"w-full rounded-lg border-gray-200"})]})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-black text-white rounded-xl font-bold hover:bg-gray-800 transition shadow-lg",children:o?"Saving...":"ðŸ’¾ Save & Publish"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Featured Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-4 text-center hover:border-black transition cursor-pointer relative bg-gray-50",children:[e.jsx("input",{type:"file",onChange:t=>a("featured_image",t.target.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*"}),r.featured_image?e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 font-bold text-sm",children:"âœ“ Image Selected"}),e.jsx("p",{className:"text-xs text-gray-500 truncate mt-1",children:r.featured_image.name})]}):e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ðŸ“·"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to upload"})]})]})]})]})]})]})})]})}export{E as default};
