import{a as _,u as A,j as e,H as w,L as b}from"./app-BpyjcQp-.js";import{A as C}from"./AuthenticatedLayout-BJjcGNLG.js";function S({portfolios:l,members:n,level:o,assignedPortfolioIds:f,preselectedMemberId:j,preselectedPositionTitle:c}){const{auth:m}=_().props,x=m.user.role,d=x==="super_admin"?"state":x.includes("district")?"district":"tehsil",u=c?l.find(s=>s.name.toLowerCase()===c.toLowerCase()):null,{data:r,setData:h,post:y,processing:g,errors:a}=A({member_id:j||"",portfolio_id:u?u.id:""}),v={executive:"bg-blue-100 text-blue-800",administrative:"bg-green-100 text-green-800",financial:"bg-yellow-100 text-yellow-800",legal:"bg-purple-100 text-purple-800",election_commission:"bg-red-100 text-red-800"},t=l.find(s=>s.id==r.portfolio_id),i=n.find(s=>s.id==r.member_id),N=s=>{s.preventDefault(),y(route(`${d}.portfolio-assignments.store`))};return e.jsxs(C,{user:m.user,header:"Assign Portfolio",children:[e.jsx(w,{title:"Assign Portfolio"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(b,{href:route(`${d}.portfolio-assignments.index`),className:"text-red-600 hover:text-red-800",children:"â† Back to Assignments"})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["ðŸ‘” Assign ",o.charAt(0).toUpperCase()+o.slice(1)," Portfolio"]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Portfolio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.portfolio_id,onChange:s=>h("portfolio_id",s.target.value),className:"w-full border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0,children:[e.jsx("option",{value:"",children:"Choose a portfolio..."}),l.map(s=>{const p=f.includes(s.id);return e.jsxs("option",{value:s.id,disabled:p,children:[s.name," (",s.type?.replace("_"," "),")",p&&" - Already Assigned"]},s.id)})]}),a.portfolio_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.portfolio_id})]}),t&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v[t.type]}`,children:t.type?.replace("_"," ")})]}),t.type==="election_commission"&&e.jsx("div",{className:"mt-2 text-sm text-amber-700 bg-amber-50 p-2 rounded",children:"âš ï¸ Election Commission role - Cannot be assigned to members with executive positions"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Member ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.member_id,onChange:s=>h("member_id",s.target.value),className:"w-full border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0,children:[e.jsx("option",{value:"",children:"Choose a member..."}),n.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.tehsil?.name||"No tehsil"," (",s.membership_id,")"]},s.id))]}),a.member_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.member_id})]}),i&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:i.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[i.tehsil?.district?.name," â†’ ",i.tehsil?.name]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Membership ID: ",i.membership_id]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(b,{href:route(`${d}.portfolio-assignments.index`),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50",children:g?"Assigning...":"Assign Portfolio"})]})]})]})]})})]})}export{S as default};
