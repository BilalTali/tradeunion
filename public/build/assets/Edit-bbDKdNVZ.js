import{a as p,u as f,j as e,H as j,L as o,b as v}from"./app-XCtiZVKQ.js";import{A as N}from"./AuthenticatedLayout-CTGkoCvp.js";function C({committee:t,committeeTypes:m,levels:y}){const{auth:c}=p().props,i=c.user.role,n=i==="super_admin"||i.includes("state")?"state":i.includes("district")?"district":i.includes("tehsil")?"tehsil":"state",{data:a,setData:l,put:u,processing:d,errors:r}=f({name:t.name||"",type:t.type||"executive",min_members:t.min_members||5,max_members:t.max_members||15,quorum_percentage:t.quorum_percentage||50,voting_threshold:t.voting_threshold||66.67,start_date:t.start_date||"",end_date:t.end_date||"",is_active:t.is_active??!0,description:t.description||"",constitutional_basis:t.constitutional_basis||""}),x=s=>{s.preventDefault(),u(route(`${n}.committees.update`,t.id))},g=()=>{confirm("Are you sure you want to delete this committee? This action cannot be undone.")&&v.delete(route(`${n}.committees.destroy`,t.id))},b={executive:"Main decision-making body for general administration",election_commission:"Manages and oversees all electoral processes",disciplinary:"Handles member discipline and code violations",finance:"Manages budget, expenditures, and financial planning",audit:"Reviews financial reports and compliance",custom:"Special-purpose committee with defined objectives"};return e.jsxs(N,{children:[e.jsx(j,{title:`Edit ${t.name}`}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(o,{href:route(`${n}.committees.show`,t.id),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 mb-4",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Committee"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Committee"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:t.name})]}),e.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Committee"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("form",{onSubmit:x,className:"p-6 sm:p-8",children:[e.jsx("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Committee Status"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.is_active?"Active committees can propose and vote on resolutions":"Inactive committees cannot propose new resolutions"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:s=>l("is_active",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-8 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all peer-checked:bg-green-600"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Committee Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(m).map(([s,h])=>e.jsxs("button",{type:"button",onClick:()=>l("type",s),className:`p-4 border-2 rounded-lg text-left transition-all ${a.type===s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:h}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:b[s]})]},s))}),r.type&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.type})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Committee Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.name,onChange:s=>l("name",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",placeholder:"e.g., State Executive Committee",required:!0}),r.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.name})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 capitalize",children:[t.level," Level",e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Committee level cannot be changed after creation"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:s=>l("description",s.target.value),rows:"3",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",placeholder:"Brief description of the committee's purpose and responsibilities..."}),r.description&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Constitutional Basis"}),e.jsx("input",{type:"text",value:a.constitutional_basis,onChange:s=>l("constitutional_basis",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",placeholder:"e.g., As per Constitution Article 5.2, Section 3"}),r.constitutional_basis&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.constitutional_basis})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Committee Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Minimum Members ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.min_members,onChange:s=>l("min_members",parseInt(s.target.value)),min:"3",max:"50",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 3"}),r.min_members&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.min_members})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Maximum Members ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.max_members,onChange:s=>l("max_members",parseInt(s.target.value)),min:"3",max:"50",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum 50 members"}),r.max_members&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.max_members})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Voting Rules"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quorum Percentage ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:a.quorum_percentage,onChange:s=>l("quorum_percentage",parseFloat(s.target.value)),min:"30",max:"100",step:"0.01",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum members required for meetings (30-100%)"}),r.quorum_percentage&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.quorum_percentage})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Voting Threshold ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:a.voting_threshold,onChange:s=>l("voting_threshold",parseFloat(s.target.value)),min:"50",max:"100",step:"0.01",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Votes required to pass resolutions (50-100%)"}),r.voting_threshold&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.voting_threshold})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Example:"})," With ",t.active_members?.length||10," current members, ",a.quorum_percentage,"% quorum = ",Math.ceil((t.active_members?.length||10)*a.quorum_percentage/100)," members required. If quorum met, ",a.voting_threshold,"% threshold = ",Math.ceil((t.active_members?.length||10)*a.voting_threshold/100)," votes needed to pass."]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Committee Tenure"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:a.start_date,onChange:s=>l("start_date",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200",required:!0}),r.start_date&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date (Optional)"}),e.jsx("input",{type:"date",value:a.end_date,onChange:s=>l("end_date",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave blank for indefinite tenure"}),r.end_date&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.end_date})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[e.jsx(o,{href:route(`${n}.committees.show`,t.id),className:"px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium shadow-sm",children:d?"Updating...":"Update Committee"})]})]})})]})})]})}export{C as default};
