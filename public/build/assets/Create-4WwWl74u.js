import{a as v,u as y,r as n,j as e,H as _,L as w}from"./app-DiGApgtN.js";import{A as C}from"./AuthenticatedLayout-CcrKPP7I.js";function q({states:k,districts:x,tehsils:h,authScope:r}){const{auth:u}=v().props,{data:l,setData:a,post:g,processing:c,errors:s}=y({tehsil_id:"",member_status:"Member",name:"",parentage:"",photo:null,dob:"",contact_email:"",contact_phone:"",school_name:"",union_join_date:""}),[d,o]=n.useState(""),[m,b]=n.useState(null);n.useEffect(()=>{r?.district_id&&o(r.district_id),r?.tehsil_id&&a("tehsil_id",r.tehsil_id)},[r]);const p=t=>{o(t),a("tehsil_id","")},j=t=>{const i=t.target.files[0];i&&(a("photo",i),b(URL.createObjectURL(i)))},f=t=>{t.preventDefault(),g(route("tehsil.members.store"),{forceFormData:!0})},N=d?h.filter(t=>t.district_id==d):[];return e.jsxs(C,{user:u.user,header:"Add New Member",children:[e.jsx(_,{title:"Add Member"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Member Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[m&&e.jsx("img",{src:m,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-union-primary file:text-white hover:file:bg-red-700"})]}),s.photo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.photo})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:t=>a("name",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Parentage (Father/Mother/Guardian) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.parentage,onChange:t=>a("parentage",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.parentage&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.parentage})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:l.dob,onChange:t=>a("dob",t.target.value),className:"w-full border-gray-300 rounded-lg"}),s.dob&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.dob})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:l.contact_email,onChange:t=>a("contact_email",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.contact_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contact_email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone (10 digits) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.contact_phone,onChange:t=>{const i=t.target.value.replace(/\D/g,"").slice(0,10);a("contact_phone",i)},className:"w-full border-gray-300 rounded-lg",maxLength:10,pattern:"\\d{10}",title:"Please enter exactly 10 digits",required:!0}),s.contact_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contact_phone})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["District ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:d,onChange:t=>p(t.target.value),className:"w-full border-gray-300 rounded-lg disabled:bg-gray-100",required:!0,disabled:!!r?.district_id,children:[e.jsx("option",{value:"",children:"Select District"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["tehsil ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.tehsil_id,onChange:t=>a("tehsil_id",t.target.value),className:"w-full border-gray-300 rounded-lg disabled:bg-gray-100",disabled:!d||!!r?.tehsil_id,required:!0,children:[e.jsx("option",{value:"",children:"Select tehsil"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.tehsil_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.tehsil_id})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.school_name,onChange:t=>a("school_name",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.school_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.school_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Union Join Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:l.union_join_date,onChange:t=>a("union_join_date",t.target.value),className:"w-full border-gray-300 rounded-lg",required:!0}),s.union_join_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.union_join_date})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-6",children:[e.jsx(w,{href:route("tehsil.members.index"),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-union-primary text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50",children:c?"Creating...":"Create Member"})]})]})})})})]})}export{q as default};
