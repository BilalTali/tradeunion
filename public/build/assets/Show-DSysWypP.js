import{a as f,j as e,H as N,L as i,b as x}from"./app-DBngFVec.js";import{A as v}from"./AuthenticatedLayout-CjQqjwy4.js";function _({election:t,hasNominated:g,isCommissionMember:l,commissionExists:h,hasECPortfolio:p,userLevel:d}){const{auth:a}=f().props,c=a.user?.role!=="member",m=a.user?.role==="member",n=(()=>{if(p&&d)return`${d}.ec`;const s=a.user?.role||"";return s==="super_admin"?"state":s.includes("district")?"district":s.toLowerCase().includes("tehsil")?"tehsil":"member"})(),u=s=>({draft:"bg-gray-100 text-gray-800",nominations_open:"bg-blue-100 text-blue-800",nominations_closed:"bg-yellow-100 text-yellow-800",voting_open:"bg-green-100 text-green-800",voting_closed:"bg-orange-100 text-orange-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",b=s=>s.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),r=s=>{confirm({"open-nominations":"Open nominations for this election?","close-nominations":"Close nominations? No more candidates can file after this.","open-voting":"Open voting for this election?","close-voting":"Close voting? No more votes can be cast after this.",complete:"Mark this election as completed?"}[s])&&x.post(route(`${n}.elections.${s}`,t.id))},j=()=>{confirm("Calculate results? This will tally all votes.")&&x.post(route(`${n}.results.calculate`,t.id))};return e.jsxs(v,{children:[e.jsx(N,{title:t.title}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.description||"No description provided"})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg font-semibold ${u(t.status)}`,children:b(t.status)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Level"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.level.charAt(0).toUpperCase()+t.level.slice(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Election Type"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.election_type.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Entity ID"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.entity_id})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Election Timeline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"ðŸ“ Nomination Period"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.nomination_start).toLocaleString("en-IN")}),e.jsx("p",{className:"text-gray-500 text-sm",children:"to"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.nomination_end).toLocaleString("en-IN")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"ðŸ—³ï¸ Voting Period"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.voting_start).toLocaleString("en-IN")}),e.jsx("p",{className:"text-gray-500 text-sm",children:"to"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.voting_end).toLocaleString("en-IN")})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[m&&t.status==="nominations_open"&&e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-6 rounded-r-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"Nominations Are Open!"}),g?e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-green-700 font-semibold mb-2",children:"âœ… You have already filed a nomination for this election."}),e.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed font-semibold",children:"Nomination Filed"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-blue-700 mb-4",children:"File your nomination for this election"}),e.jsx(i,{href:route("elections.nominate.form",t.id),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition",children:"File Nomination"})]})]}),m&&t.status==="voting_open"&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-600 p-6 rounded-r-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2",children:"Voting Is Open!"}),e.jsx("p",{className:"text-green-700 mb-4",children:"Cast your vote in this election"}),e.jsx("button",{onClick:()=>window.location.href=route("elections.vote.show",t.id),className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold transition",children:"Cast Your Vote"})]}),l&&e.jsxs("div",{className:"bg-indigo-50 rounded-lg shadow-sm border border-indigo-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"âš™ï¸"}),e.jsx("h3",{className:"text-lg font-bold text-indigo-900",children:"Eligibility Management"})]}),e.jsx("p",{className:"text-sm text-indigo-700 mb-4",children:"Set voting and candidacy criteria for this election"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(i,{href:route(`${n}.eligibility-criteria.index`,t.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"âš™ï¸ Set Eligibility Criteria"}),e.jsxs(i,{href:route(`${n}.eligible-members`,t.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:["ðŸ‘¥ View Eligible Members (",t.eligible_voters_count||0,")"]})]})]}),l&&e.jsxs("div",{className:"bg-purple-50 rounded-lg shadow-sm border border-purple-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"âš–ï¸"}),e.jsx("h3",{className:"text-lg font-bold text-purple-900",children:"Election Commission Actions"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.status==="draft"&&e.jsx("button",{onClick:()=>r("open-nominations"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Open Nominations"}),t.status==="nominations_open"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{href:route(`${n}.candidates.pending`,t.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium",children:"Review Nominations"}),e.jsx("button",{onClick:()=>r("close-nominations"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 font-medium",children:"Close Nominations"})]}),t.status==="nominations_closed"&&e.jsx("button",{onClick:()=>r("open-voting"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Open Voting"}),t.status==="voting_open"&&e.jsx("button",{onClick:()=>r("close-voting"),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium",children:"Close Voting"}),t.status==="voting_closed"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Calculate Results"}),e.jsx("button",{onClick:()=>r("complete"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium",children:"Complete Election"})]})]})]}),c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Admin Actions"}),!h&&!l&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-bold",children:"Action Required:"})," You must appoint an Election Commission to manage this election."]})})})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.status!=="completed"&&e.jsxs(i,{href:route("elections.commission.index",t.id),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ‘¥"}),"Manage Commission"]}),e.jsx(i,{href:route(`${n}.elections.edit`,t.id),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium",children:"Edit Details"}),(t.status==="completed"||t.status==="voting_closed")&&e.jsx(i,{href:route("elections.results",t.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"View Results"})]}),!l&&t.status!=="completed"&&e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"* Note: Only the Election Commission can open/close nominations and voting."})]}),t.status==="completed"&&!c&&!l&&e.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-600 p-6 rounded-r-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-900 mb-2",children:"Results Available"}),e.jsx("p",{className:"text-purple-700 mb-4",children:"View the final election results"}),e.jsx(i,{href:route("elections.results",t.id),className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold transition",children:"View Results"})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(i,{href:route(`${n==="member"?"member":n}.elections.index`),className:"inline-flex items-center px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold transition",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Elections"]})})]})})]})}export{_ as default};
