import{a as N,r as m,u,j as e,H as w}from"./app-DvqN5tN9.js";import{A as k}from"./AuthenticatedLayout-DTMwTJmp.js";function L({grievances:r}){const{auth:p}=N().props,[t,l]=m.useState(null),[h,n]=m.useState(!1),{data:o,setData:a,put:g,processing:d,errors:i,reset:b}=u({admin_response:"",status:"pending"}),j=s=>{l(s),a({admin_response:s.admin_response||"",status:s.status||"pending"}),n(!0)},c=()=>{n(!1),l(null),b()},y=s=>{s.preventDefault(),g(route("state.grievances.update",t.id),{preserveScroll:!0,onSuccess:()=>c()})},f=s=>{confirm("Are you sure you want to delete this grievance?")&&u().delete(route("state.grievances.destroy",s),{preserveScroll:!0})},x=s=>{switch(s){case"resolved":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";case"in_progress":return"bg-blue-100 text-blue-700";default:return"bg-yellow-100 text-yellow-700"}};return e.jsxs(k,{user:p.user,header:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-2xl text-gray-800",children:"Manage Grievances"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and manage member grievances and complaints."})]}),children:[e.jsx(w,{title:"Manage Grievances"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.data.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"text-gray-500",children:"No grievances submitted yet."})]}):e.jsx("div",{className:"space-y-4",children:r.data.map(s=>e.jsx("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${x(s.status).replace("bg-","border-").replace("100","500").split(" ")[0]}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 font-bold text-xl",children:s.user.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold capitalize ${x(s.status)}`,children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold bg-gray-100 text-gray-600 rounded mr-2 uppercase tracking-wide",children:s.category}),e.jsx("span",{className:"font-bold text-lg text-gray-800",children:s.subject})]}),e.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:s.message})}),s.admin_response&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-700 mb-1",children:["Admin Response ",s.responder&&`(by ${s.responder.name})`,":"]}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:s.admin_response})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>j(s),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 font-semibold transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.admin_response?"Update Status/Response":"Process Grievance"]}),e.jsxs("button",{onClick:()=>f(s.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-semibold transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})},s.id))}),r.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center gap-2",children:r.links.map((s,v)=>e.jsx("a",{href:s.url||"#",className:`px-4 py-2 rounded-lg font-semibold transition-all ${s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},v))})]})}),h&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Process Grievance"}),e.jsxs("div",{className:"mt-1 flex gap-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["From: ",t.user.name]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Category: ",t.category]})]})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:t.subject}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Status"}),e.jsxs("select",{value:o.status,onChange:s=>a("status",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Response / Resolution Note"}),e.jsx("textarea",{value:o.admin_response,onChange:s=>a("admin_response",s.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your response, resolution details, or reason for rejection..."}),i.admin_response&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.admin_response})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 font-semibold transition-all disabled:opacity-50",children:d?"Saving...":"Update Grievance"}),e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold transition-all",children:"Cancel"})]})]})]})})]})}export{L as default};
