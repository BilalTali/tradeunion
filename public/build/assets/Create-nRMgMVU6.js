import{a as k,u as C,r as h,j as e,H as L,L as p}from"./app-DmHEPWi5.js";import{A as E}from"./AuthenticatedLayout-BeN-Hvb4.js";import{P}from"./PrimaryButton-vV8e9_5z.js";function $({states:f,districts:j,tehsils:v,userLevel:u,preSelected:s}){const{auth:o}=k().props,d=o.user.role,b=(()=>{if(o.activePortfolio&&o.portfolioLevel){const t=o.activePortfolio.type,n=o.portfolioLevel;return t==="election_commission"?`${n}.ec`:o.activePortfolio.name?.includes("President")?`${n}.president`:n}return d==="super_admin"?"state":d.includes("district")&&!d.includes("member")?"district":d.includes("tehsil")&&!d.includes("member")?"tehsil":"member"})(),c=u==="tehsil"?["tehsil"]:u==="district"?["district"]:u==="state"?["state"]:["state"],m=c[c.length-1],{data:i,setData:a,post:N,processing:g,errors:r}=C({level:s?.level||m,entity_id:s?.entity_id||"",election_type:m==="tehsil"?"tehsil_president":m==="district"?"district_president":"state_president",title:"",description:"",nomination_start:"",nomination_end:"",voting_start:"",voting_end:""}),[l,y]=h.useState(s?.level||m);h.useEffect(()=>{s?.entity_id&&!i.entity_id&&a("entity_id",s.entity_id)},[s]);const w=t=>{t.preventDefault(),N(route(`${b}.elections.store`))},_=t=>{if(!c.includes(t))return;y(t),a("level",t),a("entity_id",""),a("election_type",{tehsil:"tehsil_president",district:"district_president",state:"state_president"}[t])};return e.jsxs(E,{user:o.user,header:!1,children:[e.jsx(L,{title:"Create Election"}),e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-white to-green-600 pb-24 pt-12 shadow-md border-b-4 border-blue-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(p,{href:route(`${b}.elections.index`),className:"inline-flex items-center text-blue-900 hover:text-blue-700 mb-6 transition-colors font-bold text-sm bg-white/50 px-3 py-1 rounded-full backdrop-blur-sm",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Elections"]}),e.jsx("h1",{className:"text-4xl font-extrabold text-blue-900 tracking-tight drop-shadow-sm",children:"Create Election"}),e.jsx("p",{className:"mt-2 text-blue-800 text-lg font-bold",children:"Set up and manage a new democratic process for your organization"})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:e.jsxs("form",{onSubmit:w,children:[e.jsx("div",{className:"bg-white border-b border-gray-100 px-8 py-6",children:e.jsxs("h2",{className:"text-xl font-bold text-blue-900 flex items-center",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-800 mr-3 text-lg",children:"ðŸ“"}),"Election Details"]})}),e.jsxs("div",{className:"p-8 space-y-10",children:[s&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-green-50 border border-blue-100 rounded-xl p-6 shadow-sm",children:[e.jsxs("h4",{className:"font-bold text-blue-900 mb-3 flex items-center",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Current Jurisdiction"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[e.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-orange-100 shadow-sm",children:[e.jsx("span",{className:"text-orange-600 font-semibold uppercase text-xs block mb-1",children:"State"}),e.jsx("span",{className:"text-gray-900 font-bold text-lg",children:s.stateName})]}),s.districtName&&e.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-white shadow-sm",children:[e.jsx("span",{className:"text-blue-600 font-semibold uppercase text-xs block mb-1",children:"District"}),e.jsx("span",{className:"text-gray-900 font-bold text-lg",children:s.districtName})]}),s.zoneName&&e.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-green-100 shadow-sm",children:[e.jsx("span",{className:"text-green-600 font-semibold uppercase text-xs block mb-1",children:"Tehsil"}),e.jsx("span",{className:"text-gray-900 font-bold text-lg",children:s.zoneName})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-4",children:["Election Level ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["state","district","tehsil"].map(t=>{const n=c.includes(t);let x="";return t==="state"&&(x="border-orange-500 bg-orange-50 text-orange-700"),t==="district"&&(x="border-blue-500 bg-blue-50 text-blue-700"),t==="tehsil"&&(x="border-green-500 bg-green-50 text-green-700"),e.jsxs("button",{type:"button",onClick:()=>n&&_(t),disabled:!n,className:`relative p-5 border-2 rounded-xl font-bold capitalize transition-all duration-200 shadow-sm ${l===t?`${x} shadow-md transform scale-102`:n?"border-gray-200 bg-white hover:border-blue-200 hover:bg-gray-50 text-gray-700 hover:shadow-md":"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed opacity-60"}`,children:[e.jsx("span",{className:"text-lg",children:t}),l===t&&e.jsx("span",{className:"absolute top-2 right-2",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},t)})}),r.level&&e.jsx("p",{className:"mt-2 text-sm text-red-600 font-bold",children:r.level})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Select ",l&&l.charAt(0).toUpperCase()+l.slice(1)," ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:i.entity_id,onChange:t=>a("entity_id",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 text-black bg-white font-medium h-12",required:!0,children:[e.jsxs("option",{value:"",className:"text-gray-500",children:["Choose ",l,"..."]}),l==="state"&&f?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id)),l==="district"&&j?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id)),l==="tehsil"&&v?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),r.entity_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600 font-bold",children:r.entity_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Election Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:i.title,onChange:t=>a("title",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 text-black bg-white placeholder-gray-400 font-medium h-12",placeholder:"e.g., Annual Executive Election 2024",required:!0}),r.title&&e.jsx("p",{className:"mt-2 text-sm text-red-600 font-bold",children:r.title})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:t=>a("description",t.target.value),rows:"4",className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 text-black bg-white placeholder-gray-400 font-medium p-4",placeholder:"Detailed description of the election purpose and rules..."}),r.description&&e.jsx("p",{className:"mt-2 text-sm text-red-600 font-bold",children:r.description})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-6 flex items-center",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-200 text-blue-800 mr-3 text-sm",children:"ðŸ“…"}),"Election Schedule"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"font-bold text-orange-700 border-b border-orange-200 pb-2",children:"Nomination Phase"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Start Date & Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:i.nomination_start,onChange:t=>a("nomination_start",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 text-black bg-white font-medium",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["End Date & Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:i.nomination_end,onChange:t=>a("nomination_end",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 text-black bg-white font-medium",required:!0})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"font-bold text-green-700 border-b border-green-200 pb-2",children:"Voting Phase"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Start Date & Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:i.voting_start,onChange:t=>a("voting_start",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-green-500 focus:ring focus:ring-green-200 text-black bg-white font-medium",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["End Date & Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:i.voting_end,onChange:t=>a("voting_end",t.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-green-500 focus:ring focus:ring-green-200 text-black bg-white font-medium",required:!0})]})]})]}),(r.nomination_start||r.nomination_end||r.voting_start||r.voting_end)&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm font-bold border border-red-100",children:"Please verify all dates and times are correct and in sequence."})]})]}),e.jsxs("div",{className:"bg-gray-50 px-8 py-6 border-t border-gray-100 flex items-center justify-end space-x-4",children:[e.jsx(p,{href:route(`${b}.elections.index`),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-white hover:border-gray-400 transition-colors font-bold shadow-sm",children:"Cancel"}),e.jsx(P,{disabled:g,processing:g,className:"min-w-[160px]",children:"Create Election"})]})]})})})]})]})}export{$ as default};
