import{r as x,u as D,j as e,H as E}from"./app-XCtiZVKQ.js";import{A}from"./AuthenticatedLayout-CTGkoCvp.js";import{M as L,S as F}from"./Modal-Cs1NlP1Y.js";import{I as l}from"./InputLabel-Ci7oVsuy.js";import{T as n}from"./TextInput-D8HOYe51.js";import{P as j}from"./PrimaryButton-DLUJTvHt.js";import"./transition-C7q6t7TZ.js";import"./with-selector-De2TbhED.js";function z({auth:g,tehsils:f,districts:c}){const[v,o]=x.useState(!1),[i,h]=x.useState(null),[m,y]=x.useState(""),{data:r,setData:a,post:w,put:N,delete:b,processing:C,errors:s,reset:u,clearErrors:p}=D({name:"",code:"",district_id:c.length>0?c[0].id:"",description:""}),T=()=>{h(null),u(),p(),o(!0)},k=t=>{h(t),a({name:t.name,code:t.code,district_id:t.district_id,description:t.description||""}),p(),o(!0)},d=()=>{o(!1),u()},S=t=>{t.preventDefault(),i?N(route("state.tehsils.update",i.id),{onSuccess:()=>d()}):w(route("state.tehsils.store"),{onSuccess:()=>d()})},M=t=>{confirm("Are you sure you want to delete this tehsil? This action cannot be undone.")&&b(route("state.tehsils.destroy",t.id))},_=f.filter(t=>t.name.toLowerCase().includes(m.toLowerCase())||t.code.toLowerCase().includes(m.toLowerCase()));return e.jsxs(A,{user:g.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Tehsil Master Data"}),children:[e.jsx(E,{title:"Tehsil Manager"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"w-1/3",children:e.jsx(n,{placeholder:"Search Tehsils...",value:m,onChange:t=>y(t.target.value),className:"w-full"})}),e.jsx(j,{onClick:T,children:"+ Add Tehsil"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"District"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Members"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.district?.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:t.members_count||0})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>k(t),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>M(t),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t.id))})]})})]})})}),e.jsx(L,{show:v,onClose:d,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:i?"Edit Tehsil":"Add New Tehsil"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"Tehsil Name"}),e.jsx(n,{id:"name",value:r.name,onChange:t=>a("name",t.target.value),className:"mt-1 block w-full",required:!0}),s.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"code",value:"Tehsil Code"}),e.jsx(n,{id:"code",value:r.code,onChange:t=>a("code",t.target.value),className:"mt-1 block w-full",required:!0}),s.code&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.code})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"district_id",value:"District"}),e.jsxs("select",{id:"district_id",value:r.district_id,onChange:t=>a("district_id",t.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select District"}),c.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.district_id&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.district_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",value:"Description (Optional)"}),e.jsx(n,{id:"description",value:r.description,onChange:t=>a("description",t.target.value),className:"mt-1 block w-full"}),s.description&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.description})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(F,{type:"button",onClick:d,children:"Cancel"}),e.jsx(j,{disabled:C,children:i?"Update Tehsil":"Create Tehsil"})]})]})]})})]})}export{z as default};
