import{a as x,u as C,j as e,L as F}from"./app-R9sS8T_F.js";import{I as o}from"./InputError-BCMT5o-A.js";import{I as l}from"./InputLabel-DNSmtw0K.js";import{P as I}from"./PrimaryButton-CY5eiZIq.js";import{T as n}from"./TextInput-pOeT_17g.js";import{d as P}from"./transition-SXb0pVs8.js";function Y({mustVerifyEmail:f,status:g,className:p=""}){const i=x().props.auth.user,{state:j,district:S,tehsil:D,districts:m,tehsils:c}=x().props,u=i.member?.photo_path?`/storage/${i.member.photo_path}`:i.photo_path?`/storage/${i.photo_path}`:null,{data:s,setData:a,post:v,errors:r,processing:b,recentlySuccessful:N}=C({name:i.name,email:i.email,mobile:i.mobile||"",institute:i.institute||"",residence:i.residence||"",district_id:i.district_id||"",tehsil_id:i.tehsil_id||"",photo:null,_method:"PATCH"}),_=c?.filter(t=>s.district_id?t.district_id===parseInt(s.district_id):!0)||[],y=t=>{const d=t.target.value;if(a("district_id",d),s.tehsil_id){const h=c?.find(k=>k.id===parseInt(s.tehsil_id));h&&h.district_id!==parseInt(d)&&a("tehsil_id","")}},w=t=>{t.preventDefault(),v(route("profile.update"))};return e.jsxs("section",{className:p,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your account's profile information and email address."})]}),e.jsxs("form",{onSubmit:w,className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:u?e.jsx("img",{src:u,alt:"Profile",className:"h-16 w-16 rounded-full object-cover border border-gray-300"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-400",children:"ðŸ“·"})}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"photo",value:"Profile Photo"}),e.jsx("input",{id:"photo",type:"file",className:`mt-1 block w-full text-sm text-gray-500
                                file:mr-4 file:py-2 file:px-4
                                file:rounded-full file:border-0
                                file:text-sm file:font-semibold
                                file:bg-blue-50 file:text-blue-700
                                hover:file:bg-blue-100`,onChange:t=>a("photo",t.target.files[0]),accept:"image/*"}),e.jsx(o,{className:"mt-2",message:r.photo})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"Name"}),e.jsx(n,{id:"name",className:"mt-1 block w-full",value:s.name,onChange:t=>a("name",t.target.value),required:!0,isFocused:!0,autoComplete:"name"}),e.jsx(o,{className:"mt-2",message:r.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",value:"Email"}),e.jsx(n,{id:"email",type:"email",className:"mt-1 block w-full",value:s.email,onChange:t=>a("email",t.target.value),required:!0,autoComplete:"username"}),e.jsx(o,{className:"mt-2",message:r.email})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mobile",value:"Mobile Number"}),e.jsx(n,{id:"mobile",type:"text",className:"mt-1 block w-full",value:s.mobile,onChange:t=>{const d=t.target.value.replace(/\D/g,"").slice(0,10);a("mobile",d)},autoComplete:"tel",placeholder:"10-digit mobile number",maxLength:10,pattern:"\\d{10}",title:"Please enter exactly 10 digits"}),e.jsx(o,{className:"mt-2",message:r.mobile})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"institute",value:"Institute/School Name"}),e.jsx(n,{id:"institute",className:"mt-1 block w-full",value:s.institute,onChange:t=>a("institute",t.target.value),placeholder:"Your institute or school name"}),e.jsx(o,{className:"mt-2",message:r.institute})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"residence",value:"Residence Address"}),e.jsx("textarea",{id:"residence",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:s.residence,onChange:t=>a("residence",t.target.value),placeholder:"Your residential address",rows:"3"}),e.jsx(o,{className:"mt-2",message:r.residence})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"state",value:"State"}),e.jsx(n,{id:"state",className:"mt-1 block w-full bg-gray-100 cursor-not-allowed",value:j?.name||"Jammu & Kashmir",readOnly:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"State is fixed to Jammu & Kashmir"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"district_id",value:"District"}),e.jsxs("select",{id:"district_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:s.district_id,onChange:y,children:[e.jsx("option",{value:"",children:"Select District"}),m&&m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(o,{className:"mt-2",message:r.district_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"tehsil_id",value:"tehsil"}),e.jsxs("select",{id:"tehsil_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:s.tehsil_id,onChange:t=>a("tehsil_id",t.target.value),disabled:!s.district_id,children:[e.jsx("option",{value:"",children:s.district_id?"Select tehsil":"Select District First"}),_.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(o,{className:"mt-2",message:r.tehsil_id}),!s.district_id&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please select a district first to see available tehsils"})]}),f&&i.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-2 text-sm text-gray-800",children:["Your email address is unverified.",e.jsx(F,{href:route("verification.send"),method:"post",as:"button",className:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Click here to re-send the verification email."})]}),g==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{disabled:b,children:"Save"}),e.jsx(P,{show:N,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]})}export{Y as default};
