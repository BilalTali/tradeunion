import{a as b,u as p,j as e,H as g,L as x}from"./app-DmHEPWi5.js";import{A as v}from"./AuthenticatedLayout-BeN-Hvb4.js";function _({members:d,levels:u}){const{auth:n}=b().props,i=n.user.role,c=i==="super_admin"?"state":i.includes("district")?"district":"tehsil",{data:t,setData:l,post:h,processing:o,errors:r}=p({member_id:"",to_level:"",reason:""}),m={member:"Base Member",tehsil:"tehsil Level",district:"District Level",state:"State/UT Level"},a=d.find(s=>s.id==t.member_id),f=s=>{s.preventDefault(),h(route(`${c}.transfers.store`))};return e.jsxs(v,{user:n.user,header:"Initiate Member Transfer",children:[e.jsx(g,{title:"New Transfer"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(x,{href:route(`${c}.transfers.index`),className:"text-red-600 hover:text-red-800",children:"â† Back to Transfers"})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"ðŸ”„ New Transfer Request"}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Member ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.member_id,onChange:s=>l("member_id",s.target.value),className:"w-full border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0,children:[e.jsx("option",{value:"",children:"Choose a member..."}),d.map(s=>e.jsxs("option",{value:s.id,disabled:s.has_active_transfer,className:s.has_active_transfer?"text-gray-400 italic":"",children:[s.name," - ",s.tehsil?.name," (",s.member_level||"member",")",s.has_active_transfer&&` - Transfer ${s.active_transfer_status} â³`]},s.id))]}),r.member_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.member_id}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"â„¹ï¸ Members with pending, recommended, or approved transfers are disabled and shown in gray"})]}),a&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Current Level:"})," ",m[a.member_level||"member"]]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"tehsil:"})," ",a.tehsil?.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transfer To Level ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.to_level,onChange:s=>l("to_level",s.target.value),className:"w-full border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0,children:[e.jsx("option",{value:"",children:"Select target level..."}),u.map(s=>e.jsxs("option",{value:s,disabled:a?.member_level===s,children:[m[s],a?.member_level===s&&" (current)"]},s))]}),r.to_level&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.to_level})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for Transfer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:t.reason,onChange:s=>l("reason",s.target.value),className:"w-full border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",rows:4,placeholder:"Explain why this transfer is being requested...",required:!0}),r.reason&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.reason})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-600 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Important"}),e.jsx("p",{children:"Upon transfer completion, all portfolios at the old level will be automatically released."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(x,{href:route("state.transfers.index"),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50",children:o?"Submitting...":"Submit Transfer Request"})]})]})]})]})})]})}export{_ as default};
