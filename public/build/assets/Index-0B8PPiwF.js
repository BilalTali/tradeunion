import{a as p,j as e,H as h,L as x,b as g}from"./app-DmHEPWi5.js";import{A as u}from"./AuthenticatedLayout-BeN-Hvb4.js";function b({assignments:r,portfolios:n,level:s}){const{auth:i}=p().props,l=i.user.role,a=l==="super_admin"?"state":l.includes("district")?"district":"tehsil",d={executive:"bg-blue-100 text-blue-800",administrative:"bg-green-100 text-green-800",financial:"bg-yellow-100 text-yellow-800",legal:"bg-purple-100 text-purple-800",election_commission:"bg-red-100 text-red-800"},c=t=>{confirm("Are you sure you want to remove this portfolio assignment?")&&g.delete(route(`${a}.portfolio-assignments.destroy`,t))};return e.jsxs(u,{user:i.user,header:"Portfolio Assignments",children:[e.jsx(h,{title:"Portfolio Assignments"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["ðŸ‘” ",s.charAt(0).toUpperCase()+s.slice(1)," Portfolio Assignments"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Manage portfolio assignments for ",s," level members."]})]}),e.jsx(x,{href:route(`${a}.portfolio-assignments.create`),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium",children:"+ Assign Portfolio"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-8",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Current Assignments"})}),r.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Portfolio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.portfolio?.name||t.position_title}),e.jsx("div",{className:"text-sm text-gray-500 font-mono",children:t.portfolio?.code})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.member?.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.member?.membership_id})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d[t.portfolio?.type]||"bg-gray-100"}`,children:t.portfolio?.type?.replace("_"," ")||"Custom"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.start_date?new Date(t.start_date).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>c(t.id),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},t.id))})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No portfolio assignments yet."}),e.jsx(x,{href:route(`${a}.portfolio-assignments.create`),className:"mt-4 inline-block text-red-600 hover:text-red-800",children:"Assign your first portfolio â†’"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Available Portfolios at ",s.charAt(0).toUpperCase()+s.slice(1)," Level"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(t=>{const o=r.some(m=>m.portfolio_id===t.id);return e.jsxs("div",{className:`border rounded-lg p-4 ${o?"border-green-300 bg-green-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:t.code})]}),o&&e.jsx("span",{className:"text-xs bg-green-600 text-white px-2 py-1 rounded",children:"âœ“ Assigned"})]}),e.jsx("span",{className:`mt-2 inline-block px-2 py-1 text-xs rounded-full ${d[t.type]}`,children:t.type?.replace("_"," ")})]},t.id)})})})]})]})})]})}export{b as default};
